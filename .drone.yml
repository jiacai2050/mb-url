---
{
   "kind": "pipeline",
   "name": "default",
   "services": [
      {
         "image": "kennethreitz/httpbin",
         "name": "httpbin"
      }
   ],
   "steps": [
      {
         "commands": [
            "guix pull",
            "guix upgrade",
            "guix pack --format=tarball --relocatable --relocatable --symlink=/bin=bin --root=/opt/guix-pack.tar.gz --manifest=manifest.scm",
            "tar x -z -f /opt/guix-pack.tar.gz -C /opt/guix"
         ],
         "image": "metacall/guix:latest",
         "name": "install ci deps",
         "volumes": [
            {
               "name": "guix",
               "path": "/opt/guix"
            }
         ]
      },
      {
         "commands": [
            "PATH=/opt/guix/bin:$PATH",
            "cask install",
            "sleep 15",
            "cask exec ert-runner"
         ],
         "depends_on": [
            "install ci deps"
         ],
         "environment": {
            "MB_URL_TEST__HTTPBIN_PREFIX": "http://httpbin"
         },
         "image": "silex/emacs:24.5-ci-cask",
         "name": "test-emacs24.5",
         "volumes": [
            {
               "name": "guix",
               "path": "/opt/guix"
            }
         ]
      },
      {
         "commands": [
            "PATH=/opt/guix/bin:$PATH",
            "cask install",
            "sleep 15",
            "cask exec ert-runner"
         ],
         "depends_on": [
            "install ci deps"
         ],
         "environment": {
            "MB_URL_TEST__HTTPBIN_PREFIX": "http://httpbin"
         },
         "image": "silex/emacs:25.1-ci-cask",
         "name": "test-emacs25.1",
         "volumes": [
            {
               "name": "guix",
               "path": "/opt/guix"
            }
         ]
      },
      {
         "commands": [
            "PATH=/opt/guix/bin:$PATH",
            "cask install",
            "sleep 15",
            "cask exec ert-runner"
         ],
         "depends_on": [
            "install ci deps"
         ],
         "environment": {
            "MB_URL_TEST__HTTPBIN_PREFIX": "http://httpbin"
         },
         "image": "silex/emacs:25.2-ci-cask",
         "name": "test-emacs25.2",
         "volumes": [
            {
               "name": "guix",
               "path": "/opt/guix"
            }
         ]
      },
      {
         "commands": [
            "PATH=/opt/guix/bin:$PATH",
            "cask install",
            "sleep 15",
            "cask exec ert-runner"
         ],
         "depends_on": [
            "install ci deps"
         ],
         "environment": {
            "MB_URL_TEST__HTTPBIN_PREFIX": "http://httpbin"
         },
         "image": "silex/emacs:25.3-ci-cask",
         "name": "test-emacs25.3",
         "volumes": [
            {
               "name": "guix",
               "path": "/opt/guix"
            }
         ]
      },
      {
         "commands": [
            "PATH=/opt/guix/bin:$PATH",
            "cask install",
            "sleep 15",
            "cask exec ert-runner"
         ],
         "depends_on": [
            "install ci deps"
         ],
         "environment": {
            "MB_URL_TEST__HTTPBIN_PREFIX": "http://httpbin"
         },
         "image": "silex/emacs:26.1-ci-cask",
         "name": "test-emacs26.1",
         "volumes": [
            {
               "name": "guix",
               "path": "/opt/guix"
            }
         ]
      },
      {
         "commands": [
            "PATH=/opt/guix/bin:$PATH",
            "cask install",
            "sleep 15",
            "cask exec ert-runner"
         ],
         "depends_on": [
            "install ci deps"
         ],
         "environment": {
            "MB_URL_TEST__HTTPBIN_PREFIX": "http://httpbin"
         },
         "image": "silex/emacs:26.2-ci-cask",
         "name": "test-emacs26.2",
         "volumes": [
            {
               "name": "guix",
               "path": "/opt/guix"
            }
         ]
      },
      {
         "commands": [
            "PATH=/opt/guix/bin:$PATH",
            "cask install",
            "sleep 15",
            "cask exec ert-runner"
         ],
         "depends_on": [
            "install ci deps"
         ],
         "environment": {
            "MB_URL_TEST__HTTPBIN_PREFIX": "http://httpbin"
         },
         "image": "silex/emacs:26.3-ci-cask",
         "name": "test-emacs26.3",
         "volumes": [
            {
               "name": "guix",
               "path": "/opt/guix"
            }
         ]
      }
   ],
   "volumes": [
      {
         "name": "guix",
         "temp": { }
      }
   ]
}
---
{
   "kind": "pipeline",
   "name": "test for emacs 24.4",
   "services": [
      {
         "image": "kennethreitz/httpbin",
         "name": "httpbin"
      }
   ],
   "steps": [
      {
         "commands": [
            "guix pull",
            "guix upgrade",
            "guix pack --format=tarball --relocatable --relocatable --symlink=/bin=bin --root=/opt/guix-pack.tar.gz --manifest=manifest.scm",
            "tar x -z -f /opt/guix-pack.tar.gz -C /opt/guix"
         ],
         "image": "metacall/guix:latest",
         "name": "install ci deps",
         "volumes": [
            {
               "name": "guix",
               "path": "/opt/guix"
            }
         ]
      },
      {
         "commands": [
            "PATH=/opt/guix/bin:$PATH",
            "cask install",
            "sleep 15",
            "cask exec ert-runner"
         ],
         "depends_on": [
            "install ci deps"
         ],
         "environment": {
            "MB_URL_TEST__HTTPBIN_PREFIX": "http://httpbin"
         },
         "image": "silex/emacs:24.4-ci-cask",
         "name": "test-emacs24.4",
         "volumes": [
            {
               "name": "guix",
               "path": "/opt/guix"
            }
         ]
      }
   ],
   "volumes": [
      {
         "name": "guix",
         "temp": { }
      }
   ]
}
...
